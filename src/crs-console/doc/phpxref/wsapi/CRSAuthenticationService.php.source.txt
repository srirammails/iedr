<?php 

// AUTO-GENERATED BY libxslt AT 2011-07-26T12:07:38+01:00

class CRSAuthenticationService_authenticatedUserVO
	extends crs_wsapi_vo_base
	{
	public $username;// type=xs:string, (NOT NULL), min=1
	public $authenticationToken;// type=xs:string, (NOT NULL), min=1
	}

class CRSAuthenticationService_service
	extends crs_wsapi_service_base
	{
	static public function authenticate(&$result,&$errs, $username, $password)
		{
		$response = null;
		$errs = 'SOAP Request Error';
		self::log("CRSAuthenticationService::authenticate()",__FILE__,__LINE__);
		$client = null;
		try
			{
			$client = new SoapClient(self::getSoapUrl().'CRSAuthenticationService?wsdl', self::$crs_soap_options);
			$response = $client->authenticate
					(
					array(
					'username' => $username, // type=xs:string, (NOT NULL), min=0
					'password' => $password, // type=xs:string, (NOT NULL), min=0
					)
				);
			if(is_object($response) and property_exists($response,'return'))
				$result = /*(authenticatedUserVO)*/ $response->return;
			$errs = null;
			}
		catch (Exception $e)
			{
			$expected_exceptions = array
				(
				'InvalidUsernameException',
				'InvalidPasswordException',
				'PasswordExpiredException',
				'IllegalArgumentException',
				'AuthenticationException',
				
				);
			$errs = self::getMessageFromException($e, $expected_exceptions);
			}
		self::logrequest($client);
		return $response==null ? false : true;
		}
		
	}
?>
